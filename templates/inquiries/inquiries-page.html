{% extends 'common/base.html' %}
{% load static %}
{% block content %}
    <link href="{% static 'css/inquiries-page.css' %}" rel="stylesheet"/>

    <div class="inquiries-page-container">
        {% include 'common/navbar.html' %}

        <inquiries-wrapper class="inquiries-wrapper" rootclassname="inquiriesundefined">
            <div class="inquiries-container1 thq-section-padding inquiriesroot-class-name">
                <div class="inquiries-max-width thq-section-padding thq-section-max-width">

                    <h1 class="inquiries-page-text39">Inquiries</h1>
                    <hr class="inquiries-separator1"/>

                    <form method="get" class="inquiries-container2" style="margin-bottom:20px;">
                        <select name="status" onchange="this.form.submit()"
                                class="thq-input thq-body-large" style="padding:5px;">
                            {% for value, label in statuses %}
                                <option value="{{ value }}" {% if value == selected_status %}selected{% endif %}>
                                    {{ label|title }}
                                </option>
                            {% endfor %}
                        </select>
                    </form>

                    <h1 style="margin-top:10px; margin-bottom:20px;">
                        Showing inquiries: {{ selected_status|title }}
                    </h1>
                    <hr class="inquiries-separator1" style="margin-bottom:20px;"/>

                    {% for inquiry in inquiries %}
                        <div class="inquiries-container3">
                            <span class="inquiries-text16">Full Name:</span>
                            <span class="inquiries-text20">{{ inquiry.full_name }}</span>

                            <span class="inquiries-text17">Email:</span>
                            <span class="inquiries-text21">{{ inquiry.email }}</span>

                            <span class="inquiries-text18">Phone Number:</span>
                            <span class="inquiries-text22">{{ inquiry.phone_number }}</span>

                            <span class="inquiries-text19">Subject:</span>
                            <span class="inquiries-text23">{{ inquiry.subject }}</span>

                        </div>

                        <div style="display:flex; gap:15px; margin-top:10px;">
                            {% if inquiry.status == "in progress" %}
                                <a href="{% url 'answer-inquiry' inquiry.pk %}"
                                   class="thq-button-filled">
                                    <span class="thq-body-small">Answer Inquiry</span>
                                </a>
                            {% endif %}
                            <a href="{% url 'inquiry-details' inquiry.pk %}"
                               class="thq-button-filled">
                                <span class="thq-body-small">View Details</span>
                            </a>
                        </div>

                        <hr class="inquiries-separator3"/>
                    {% empty %}
                        <p>No inquiries found for this status.</p>
                    {% endfor %}

                    {% if is_paginated %}
                        <div class="pagination"
                             style="margin-top: 20px; display: flex; justify-content: center; gap: 10px;">
                            {% if page_obj.has_previous %}
                                <a href="?status={{ selected_status }}&page=1" class="thq-button-filled">First</a>
                                <a href="?status={{ selected_status }}&page={{ page_obj.previous_page_number }}"
                                   class="thq-button-filled">Previous</a>
                            {% endif %}

                            <span style="padding: 8px 12px; background: #333; color: white; border-radius: 4px;">
                            Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
                        </span>

                            {% if page_obj.has_next %}
                                <a href="?status={{ selected_status }}&page={{ page_obj.next_page_number }}"
                                   class="thq-button-filled">Next</a>
                                <a href="?status={{ selected_status }}&page={{ page_obj.paginator.num_pages }}"
                                   class="thq-button-filled">Last</a>
                            {% endif %}
                        </div>
                    {% endif %}
                </div>

                <img alt="SignUp Image"
                     src="{% static 'img/dsc09855.jpg-1500w.jpeg' %}"
                     class="inquiries-sign-up-image thq-img-ratio-16-9"/>
                <div class="inquiries-container4"></div>
            </div>
        </inquiries-wrapper>
    </div>
{% endblock %}

